<!DOCTYPE html>
<html lang="en">
<head>
    <!--<base href="">-->
    <meta charset="UTF-8">
    <title>Gaussian Tests</title>
</head>
<body>
    <script src="../../build/Dirtybomb.js"></script>
    <script type="text/javascript">
        // From Page 17 - 18 of http://dept.ceer.utexas.edu/ceer/che357/PDF/Lectures/gaussian_plume_modeling.pdf
        // Problem a)
        var source = new dirtybomb.Source(
                dirtybomb.SourceType.POINT, // Type of source
                151, // emission Rate (g/s)
                // Not needed if setting effective source height manually
                // Don't need these here but just for show
                null, // height
                null, // radius (m)
                null, // temp (K)
                null  // exitVelocity (m/s)
        );

        var atm = new dirtybomb.Atmosphere(
                2.5,    // wind speed (m/s)
                0,  // Sky cover clear ( 0 - 1 )
                20,  // Solar elevation (degrees)
                null, // temp (K)
                "rural" // setting ("rural" or default: "urban")
        );
        var plume = new dirtybomb.GaussianPlume(atm, source);
        plume.setEffectiveSourceHeight(150);

        console.log('Plume: ' + plume);
        console.log("Effective source height: " + plume.getEffectiveSourceHeight() + " meters.");
        console.log("Windspeed at effective source height: " +
                plume.getAtmosphere().getWindSpeedAt(plume.getEffectiveSourceHeight()) + " m/s.");
        console.log("Max concentration at " + plume.getMaxConcentrationX() + " meters from source.");
        console.log("Max concentration: " + plume.getMaxConcentration() + " micrograms / cubic meter.");

        // Problem b)
        atm.setWindSpeed(2).setSolarElevation(65);

        console.log('Plume: ' + plume);
        console.log("Effective source height: " + plume.getEffectiveSourceHeight() + " meters.");
        console.log("Windspeed at effective source height: " +
                plume.getAtmosphere().getWindSpeedAt(plume.getEffectiveSourceHeight()) + " m/s.");
        console.log("Max concentration at " + plume.getMaxConcentrationX() + " meters from source.");
        console.log("Max concentration: " + plume.getMaxConcentration() + " micrograms / cubic meter.");

    </script>
</body>
</html>